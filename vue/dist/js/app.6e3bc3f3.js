(function(e){function t(t){for(var l,r,n=t[0],s=t[1],c=t[2],d=0,p=[];d<n.length;d++)r=n[d],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&p.push(o[r][0]),o[r]=0;for(l in s)Object.prototype.hasOwnProperty.call(s,l)&&(e[l]=s[l]);u&&u(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],l=!0,n=1;n<a.length;n++){var s=a[n];0!==o[s]&&(l=!1)}l&&(i.splice(t--,1),e=r(r.s=a[0]))}return e}var l={},o={app:0},i=[];function r(t){if(l[t])return l[t].exports;var a=l[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=l,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var l in e)r.d(a,l,function(t){return e[t]}.bind(null,l));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],s=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var u=s;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"16a6":function(e,t,a){"use strict";var l=a("93c0"),o=a.n(l);o.a},"1eb3":function(e,t,a){"use strict";var l=a("7fb7"),o=a.n(l);o.a},"554d":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("a4d3"),a("e01a"),a("d28b"),a("d3b7"),a("3ca3"),a("ddb0");var l=a("2909"),o=(a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("2b0e")),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},r=[],n=a("2877"),s={},c=Object(n["a"])(s,i,r,!1,null,null,null),u=c.exports,d=a("8c4f"),p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home-div"},[a("div",{staticClass:"header-div"},[a("span",{directives:[{name:"show",rawName:"v-show",value:e.userInfo.username,expression:"userInfo.username"}],staticClass:"username",on:{click:e.editProfile}},[a("i",{staticClass:"el-icon-user-solid"}),a("span",{staticClass:"username-span"},[e._v(e._s(e.userInfo.username))])]),a("span",{staticClass:"logout-button",on:{click:e.logout}},[a("i",{staticClass:"el-icon-switch-button"}),e._v("退出 ")])]),a("el-menu",{staticClass:"left-menu",attrs:{"unique-opened":"",router:"","default-active":e.$route.path,collapse:e.leftMenu.isCollapse},on:{open:function(t){return e.collapseLeft(!0)},close:function(t){return e.collapseLeft(!1)}}},e._l(e.leftMenu.navList,(function(t){return a(t.children&&t.children.length>0?"el-submenu":"el-menu-item",{key:t.title+t.url,tag:"component",staticClass:"menu-item",attrs:{index:t.url}},[a("template",{slot:"title"},[a("i",{class:[t.icon]}),a("span",[e._v(e._s(t.title))])]),t.children&&t.children.length>0?e._l(t.children,(function(t,l){return a("el-menu-item",{key:t.url+l,staticClass:"menu-item",attrs:{index:t.url}},[a("i",{class:[t.icon]}),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])])})):e._e()],2)})),1),a("div",{staticClass:"right-part",class:{collapse:e.leftMenu.isCollapse}},[a("div",{staticClass:"article-div"},[a("router-view",{on:{"update-user":e.getUserInfo}})],1)])],1)},f=[],b=a("5530"),m=a("bc3a"),g=a.n(m),h=a("4328"),v=a.n(h),y=a("5c96"),I=a.n(y),w={UNKNOWN_ERROR:-1,UNAUTHORIZED:-11,UNKNOW_USERNAME:-12,INCORRECT_PASSWORD:-13};g.a.defaults.timeout=2e4,g.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8",g.a.interceptors.response.use((function(e){var t=e.data;return t&&t.code==w.UNAUTHORIZED&&Object(y["Message"])({message:"登录已失效，请重新登录",showClose:!0,onClose:function(){Ce.push({path:"/login",query:{from:Ce.currentRoute.path}})}}),e}),(function(e){return Promise.reject(e)}));var _=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(l,o){g.a.get(e,Object(b["a"])({params:t},a)).then((function(e){l(e.data)})).catch((function(e){o(e.data)}))}))},k=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(l,o){g.a.post(e,v.a.stringify(t),a).then((function(e){l(e.data)})).catch((function(e){o(e.data)}))}))},x={get:_,post:k};window.axios=x;var C={data:function(){return{userInfo:{username:""},leftMenu:{isCollapse:!1,navList:[{icon:"el-icon-document",title:"订单管理",url:"/OrderManage"},{icon:"el-icon-dish",title:"菜单管理",url:"/ProductManage"},{icon:"el-icon-suitcase",title:"店铺管理",url:"suibianxie",children:[{icon:"el-icon-tickets",title:"店铺资料",url:"/StoreProfile"},{icon:"el-icon-picture-outline",title:"轮播图管理",url:"/BannerPicture"},{icon:"el-icon-s-grid",title:"桌台管理",url:"/TableManage"}]},{icon:"el-icon-setting",title:"账号管理",url:"/AccountManage"},{icon:"el-icon-user",title:"个人资料",url:"/PersonProfile"}]}}},mounted:function(){window.$=this.$,this.getUserInfo()},methods:{getUserInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=t&&t!=this.userInfo.sellerId||x.get("/admin/loginStatus").then((function(t){t&&1==t.code&&(e.userInfo=t.data)}))},logout:function(){var e=this;x.get("/admin/logout").then((function(){e.$router.push("/login")}))},collapseLeft:function(){},editProfile:function(){this.$router.push("/PersonProfile")}}},T=C,S=(a("88af"),Object(n["a"])(T,p,f,!1,null,"26373ae9",null)),P=S.exports,$=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-div"},[a("h2",{staticClass:"title-text"},[e._v("商家管理后台登录")]),a("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"用户名",prop:"username"}},[a("el-input",{attrs:{placeholder:"注册时的手机号码"},model:{value:e.loginForm.username,callback:function(t){e.$set(e.loginForm,"username",e._n(t))},expression:"loginForm.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{type:"password",autocomplete:"off",placeholder:"请输入密码"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.loginAction("loginForm")}},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password",t)},expression:"loginForm.password"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.loginAction("loginForm")}}},[e._v("登录")]),a("el-button",{on:{click:function(t){return e.resetForm("loginForm")}}},[e._v("重置")])],1)],1)],1)},z=[],N={data:function(){var e=function(e,t,a){if(!/^\d{11}$/.test(t))return a(new Error("请输入11位的手机号码"));a()},t=function(e,t,a){""===t?a(new Error("请输入密码")):a()};return{toURL:this.$route.query.from||"/",loginForm:{username:"",password:""},rules:{username:[{validator:e,trigger:"blur"}],password:[{validator:t,trigger:"blur"}]}}},methods:{loginAction:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return t.$alert("信息填写有误，请检查用户名和密码","未提交",{confirmButtonText:"确定"}),!1;x.post("/admin/loginAdmin",t.loginForm).then((function(e){e&&1==e.code?t.$message({message:"登录成功",type:"success",showClose:!0,onClose:function(){t.$router.push(t.toURL)}}):e.tips&&t.$alert(e.tips,"登录失败",{confirmButtonText:"确定"})}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},O=N,j=(a("d1ee"),Object(n["a"])(O,$,z,!1,null,"131cf159",null)),E=j.exports,D=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit-parent"},[a("div",{staticClass:"order-manage-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"padding24"},[e._m(0),a("div",{staticClass:"orders-div"},[a("div",{staticClass:"tools-div"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchInfo}},[a("el-form-item",[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.orderStatus,callback:function(t){e.orderStatus=t},expression:"orderStatus"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入用户昵称/联系方式/订单编号","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchInfo()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getSearchInfo()}}},[e._v("查询")])],1)],1)],1),a("div",{staticClass:"order-table"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.updateInfo},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"订单列表",name:"menuList"}},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getTableInfo()}}}),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInfo.tableData,border:""},on:{"expand-change":e.updateScrollbar}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._l(e.tableInfo.stringMap,(function(l,o){return a("el-form-item",{key:l.id,attrs:{label:e.tableInfo.stringMap[o]}},[a("span",[e._v(e._s(t.row[o]))])])})),a("el-form-item",{attrs:{label:"订单内容"}},e._l(t.row.orderDetailList,(function(t){return a("div",{key:t.detailId},[e._v(" "+e._s(t.productName)+" ¥"+e._s(t.productPrice)+" x "+e._s(t.productQuantity)+" ")])})),0)],2)]}}])}),a("el-table-column",{attrs:{label:"订单 ID",prop:"orderId"}}),a("el-table-column",{attrs:{label:"用户名称",prop:"buyerName"}}),a("el-table-column",{attrs:{label:"订单金额",prop:"orderAmount"}}),a("el-table-column",{attrs:{label:"联系方式",prop:"buyerPhone"}}),a("el-table-column",{attrs:{label:"订单状态",prop:"orderStatusStr"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",icon:"el-icon-coin",circle:"",title:"确定接单/确定支付",disabled:t.row.orderStatus!=e.actionMap["new"].status,size:"small"},on:{click:function(a){return e.changeStatus(t.$index,"pay")}}}),a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",title:"确定完结",disabled:[e.actionMap["new"].status,e.actionMap["pay"].status].indexOf(t.row.orderStatus)<0,size:"small"},on:{click:function(a){return e.changeStatus(t.$index,"over")}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",title:"取消订单",disabled:[e.actionMap["new"].status,e.actionMap["pay"].status].indexOf(t.row.orderStatus)<0,size:"small"},on:{click:function(a){return e.changeStatus(t.$index,"cancel")}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.tableInfo.page_num,"page-sizes":[6,8,10,15,20,30],"page-size":e.tableInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.tableInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changePageSize,"current-change":e.changePage}})],1)]),a("el-tab-pane",{attrs:{label:"搜索结果",name:"searchResult"}},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getSearchInfo(!0)}}}),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchInfo.tableData,border:""},on:{"expand-change":e.updateScrollbar}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._l(e.tableInfo.stringMap,(function(l,o){return a("el-form-item",{key:l.id,attrs:{label:e.tableInfo.stringMap[o]}},[a("span",[e._v(e._s(t.row[o]))])])})),a("el-form-item",{attrs:{label:"订单内容"}},e._l(t.row.orderDetailList,(function(t){return a("div",{key:t.detailId},[e._v(" "+e._s(t.productName)+" ¥"+e._s(t.productPrice)+" x "+e._s(t.productQuantity)+" ")])})),0)],2)]}}])}),a("el-table-column",{attrs:{label:"订单 ID",prop:"orderId"}}),a("el-table-column",{attrs:{label:"用户名称",prop:"buyerName"}}),a("el-table-column",{attrs:{label:"订单金额",prop:"orderAmount"}}),a("el-table-column",{attrs:{label:"联系方式",prop:"buyerPhone"}}),a("el-table-column",{attrs:{label:"订单状态",prop:"orderStatusStr"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"warning",icon:"el-icon-coin",circle:"",title:"确定接单/确定支付",disabled:t.row.orderStatus!=e.actionMap["new"].status,size:"small"},on:{click:function(a){return e.changeStatus(t.$index,"pay")}}}),a("el-button",{attrs:{type:"success",icon:"el-icon-check",circle:"",title:"确定完结",disabled:[e.actionMap["new"].status,e.actionMap["pay"].status].indexOf(t.row.orderStatus)<0,size:"small"},on:{click:function(a){return e.changeStatus(t.$index,"over")}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-close",circle:"",title:"取消订单",disabled:[e.actionMap["new"].status,e.actionMap["pay"].status].indexOf(t.row.orderStatus)<0,size:"small"},on:{click:function(a){return e.changeStatus(t.$index,"cancel")}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.searchInfo.page_num,"page-sizes":[6,8,10,15,20,30],"page-size":e.searchInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.searchInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changeSearchPageSize,"current-change":e.changeSearchPage}})],1)])],1)],1)])])])])},V=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-div"},[a("h2",{staticClass:"title-text"},[a("span",[e._v("订单管理")])])])}],A=(a("4160"),a("45fc"),a("159b"),{data:function(){var e={activeTab:"menuList",statusList:[{label:"全部",value:-1},{label:"新订单未支付",value:0},{label:"订单已支付",value:1},{label:"已取消",value:2},{label:"已完结",value:3},{label:"已评价",value:4}],actionMap:{new:{status:0},pay:{url:"/pay/confirmPay",tips:"确认支付",status:1},over:{url:"/seller/order/finish",tips:"确认完结",status:3},cancel:{url:"/seller/order/cancel",tips:"订单取消",status:2}},statusMap:{},searchInfo:{keyword:"",orderStatus:-1,page_num:1,page_size:8,total_num:1,tableData:[]},orderStatus:-1,keyword:"",tableInfo:{page_num:1,page_size:8,total_num:1,stringMap:{orderId:"订单ID",buyerName:"用户名称",buyerAddress:"地址",isTakeout:"外卖配送",buyerPhone:"联系方式",updateTime:"更新时间",createTime:"创建时间"},tableData:[]}};return e.statusList.forEach((function(t){e.statusMap[t.value]=t.label})),e},mounted:function(){this.$(".jquery-scrollbar-element").scrollbar(),this.getTableInfo()},methods:{updateScrollbar:function(e,t){var a=this;this.$nextTick((function(){0!=t.length&&!0!==e||a.$(".table-div").updateScrollbars(!0)}))},changeSearchPage:function(e){this.searchInfo.page_num=e,this.getSearchInfo(!0)},changeSearchPageSize:function(e){this.searchInfo.page_size=e,this.getSearchInfo(!0)},changePage:function(e){this.tableInfo.page_num=e,this.getTableInfo()},changePageSize:function(e){this.tableInfo.page_size=e,this.getTableInfo()},updateInfo:function(){"menuList"==this.activeTab?this.getTableInfo():this.getSearchInfo(!0)},getTableInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t?this.searchInfo:this.tableInfo,l={};t&&(l={keyword:this.searchInfo.keyword,status:this.searchInfo.orderStatus}),x.get("/seller/order/list",Object(b["a"])({page_num:a.page_num,page_size:a.page_size},l)).then((function(a){a&&1==a.code&&a.data&&(a.data.tableData.forEach((function(t){t.isTakeout=0==t.takeout?"堂食":"外卖",t.orderStatusStr=e.statusMap[t.orderStatus]})),t?e.searchInfo=Object.assign(e.searchInfo,a.data):e.tableInfo=Object.assign(e.tableInfo,a.data))}))},getSearchInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.searchInfo.keyword=this.keyword,this.searchInfo.orderStatus=this.orderStatus),this.activeTab="searchResult",this.getTableInfo(!0)},changeStatus:function(e,t){var a=this,l=this.actionMap[t],o=l.url,i=l.tips,r="menuList"==this.activeTab?this.tableInfo:this.searchInfo,n=r.tableData[e].orderId;x.get(o,{orderId:n}).then((function(e){if(e&&1==e.code){a.$message({message:i+"成功",type:"success"});var t=-1;r.tableData.some((function(e,a){if(e.orderId==n)return t=a,!0}));var o=l.status;t>=0&&(r.tableData[t].orderStatus=o,r.tableData[t].orderStatusStr=a.statusMap[o])}else a.$alert(e.tips,i+"失败",{confirmButtonText:"确定"})}))}}}),M=A,U=(a("a9d2"),Object(n["a"])(M,D,V,!1,null,"3516250c",null)),F=U.exports,L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit-parent"},[a("div",{staticClass:"product-manage-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"padding24"},[e._m(0),a("div",{staticClass:"orders-div"},[a("div",{staticClass:"tools-div"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchInfo}},[a("el-form-item",[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择",size:"small"},model:{value:e.productStatus,callback:function(t){e.productStatus=t},expression:"productStatus"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入商品名称/编号/描述","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchInfo()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getSearchInfo()}}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-plus"},on:{click:function(t){e.dialog.addCategoryVisible=!0}}},[e._v("添加分类")])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",type:"success",icon:"el-icon-plus"},on:{click:e.showAddProduct}},[e._v("添加商品")])],1)],1)],1),a("div",{staticClass:"order-table"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.updateInfo},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"菜单列表",name:"menuList"}},[a("div",{staticClass:"category-tags"},e._l(e.tableInfo.categories,(function(t,l){return a("el-tag",{key:t.categoryId,staticClass:"category-tag",attrs:{size:"small",closable:""},on:{click:e.selectCategory,close:function(t){return e.deleteCategory(l)}},nativeOn:{click:function(t){return e.showEditCategory(t,l)}}},[e._v(e._s(t.categoryName)),a("i",{staticClass:"el-icon-edit edit-category"})])})),1),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getTableInfo()}}}),a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInfo.tableData},on:{"expand-change":e.updateScrollbar}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._l(e.tableInfo.stringMap,(function(l,o){return a("el-form-item",{key:l.id,attrs:{label:e.tableInfo.stringMap[o]}},[a("span",[e._v(e._s(t.row[o]))])])})),a("el-form-item",{attrs:{label:"商品图片"}},[a("el-avatar",{attrs:{shape:"square",size:100,fit:"cover",src:t.row["productIcon"]}})],1)],2)]}}])}),a("el-table-column",{attrs:{label:"商品 ID",prop:"productId"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),a("el-table-column",{attrs:{label:"价格",prop:"productPrice"}}),a("el-table-column",{attrs:{label:"库存",prop:"productStock"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",title:"编辑",size:"small"},on:{click:function(a){return e.showEditProduct(t.$index)}}}),t.row.productStatus?a("el-button",{attrs:{type:"success",icon:"el-icon-upload2",circle:"",title:"上架",size:"small"},on:{click:function(a){return e.changeStatus(t.$index,!0)}}}):a("el-button",{attrs:{type:"warning",icon:"el-icon-download",circle:"",title:"下架",size:"small"},on:{click:function(a){return e.changeStatus(t.$index,!1)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",title:"删除",size:"small"},on:{click:function(a){return e.deleteProduct(t.$index)}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.tableInfo.page_num,"page-sizes":[6,8,10,15,20,30],"page-size":e.tableInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.tableInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changePageSize,"current-change":e.changePage}})],1)]),a("el-tab-pane",{attrs:{label:"搜索结果",name:"searchResult"}},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getSearchInfo(!0)}}}),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchInfo.tableData},on:{"expand-change":e.updateScrollbar}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[e._l(e.tableInfo.stringMap,(function(l,o){return a("el-form-item",{key:l.id,attrs:{label:e.tableInfo.stringMap[o]}},[a("span",[e._v(e._s(t.row[o]))])])})),a("el-form-item",{attrs:{label:"商品图片"}},[a("el-avatar",{attrs:{shape:"square",size:100,fit:"cover",src:t.row["productIcon"]}})],1)],2)]}}])}),a("el-table-column",{attrs:{label:"商品 ID",prop:"productId"}}),a("el-table-column",{attrs:{label:"商品名称",prop:"productName"}}),a("el-table-column",{attrs:{label:"价格",prop:"productPrice"}}),a("el-table-column",{attrs:{label:"库存",prop:"productStock"}}),a("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",title:"编辑",size:"small"},on:{click:function(a){return e.showEditProduct(t.$index)}}}),t.row.productStatus?a("el-button",{attrs:{type:"success",icon:"el-icon-upload2",circle:"",title:"上架",size:"small"},on:{click:function(a){return e.changeStatus(t.$index,!0)}}}):a("el-button",{attrs:{type:"warning",icon:"el-icon-download",circle:"",title:"下架",size:"small"},on:{click:function(a){return e.changeStatus(t.$index,!1)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",title:"删除",size:"small"},on:{click:function(a){return e.deleteProduct(t.$index)}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.searchInfo.page_num,"page-sizes":[6,8,10,15,20,30],"page-size":e.searchInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.searchInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changeSearchPageSize,"current-change":e.changeSearchPage}})],1)])],1)],1)]),a("el-dialog",{attrs:{title:"添加分类",visible:e.dialog.addCategoryVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"addCategoryVisible",t)}}},[a("el-form",{attrs:{model:e.dialog.newCategory}},[a("el-form-item",{attrs:{label:"分类名称","label-width":"120px"}},[a("el-input",{attrs:{autocomplete:"off"},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.dialogFormVisible=!1,e.addCategory()}},model:{value:e.dialog.newCategory.categoryName,callback:function(t){e.$set(e.dialog.newCategory,"categoryName",t)},expression:"dialog.newCategory.categoryName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.addCategoryVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialog.addCategoryVisible=!1,e.addCategory()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑分类",visible:e.dialog.editCategoryVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"editCategoryVisible",t)}}},[a("el-form",{attrs:{model:e.dialog.editCategory}},[a("el-form-item",{attrs:{label:"分类名称","label-width":"120px"}},[a("el-input",{attrs:{disabled:""},model:{value:e.dialog.editCategory.oldName,callback:function(t){e.$set(e.dialog.editCategory,"oldName",t)},expression:"dialog.editCategory.oldName"}})],1),a("el-form-item",{attrs:{label:"编辑名称","label-width":"120px"}},[a("el-input",{attrs:{placeholder:"请输入名称",autocomplete:"off"},nativeOn:{keydown:function(t){if(!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.editCategoryVisible=!1,e.editCategory()}},model:{value:e.dialog.editCategory.categoryName,callback:function(t){e.$set(e.dialog.editCategory,"categoryName",t)},expression:"dialog.editCategory.categoryName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.editCategoryVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialog.editCategoryVisible=!1,e.editCategory()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"添加商品",visible:e.dialog.addProductVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"addProductVisible",t)}}},[a("el-form",{attrs:{model:e.dialog.newProduct,"status-icon":"",rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"商品名称","label-width":"120px",prop:"productName"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入商品名称"},model:{value:e.dialog.newProduct.productName,callback:function(t){e.$set(e.dialog.newProduct,"productName",t)},expression:"dialog.newProduct.productName"}})],1),a("el-form-item",{attrs:{label:"描述","label-width":"120px",prop:"productDescription"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入描述",autocomplete:"off"},model:{value:e.dialog.newProduct.productDescription,callback:function(t){e.$set(e.dialog.newProduct,"productDescription",t)},expression:"dialog.newProduct.productDescription"}})],1),a("el-form-item",{attrs:{label:"分类","label-width":"120px"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.dialog.newProduct.categoryType,callback:function(t){e.$set(e.dialog.newProduct,"categoryType",t)},expression:"dialog.newProduct.categoryType"}},e._l(e.tableInfo.categories,(function(e){return a("el-option",{key:e.id,attrs:{label:e.categoryName,value:e.categoryType}})})),1)],1),a("el-form-item",{attrs:{label:"价格","label-width":"120px",prop:"productPrice"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入价格",autocomplete:"off"},model:{value:e.dialog.newProduct.productPrice,callback:function(t){e.$set(e.dialog.newProduct,"productPrice",t)},expression:"dialog.newProduct.productPrice"}})],1),a("el-form-item",{attrs:{label:"库存","label-width":"120px",prop:"productStock"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入库存",autocomplete:"off"},model:{value:e.dialog.newProduct.productStock,callback:function(t){e.$set(e.dialog.newProduct,"productStock",t)},expression:"dialog.newProduct.productStock"}})],1),a("el-form-item",{attrs:{label:"图片","label-width":"120px",prop:"productIcon"}},[a("el-upload",{staticClass:"upload-image",attrs:{"on-success":e.uploadIconSuccess,action:e.uploadUrl,limit:1,name:"file","list-type":"picture-card","before-upload":e.beforeIconUpload,"on-exceed":e.uploadExcced}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.addProductVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.addProduct}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑商品",visible:e.dialog.editProductVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"editProductVisible",t)}}},[a("el-form",{attrs:{model:e.dialog.editProduct,"status-icon":"",rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"商品名称","label-width":"120px",prop:""}},[a("el-input",{attrs:{size:"small",placeholder:"请输入商品名称"},model:{value:e.dialog.editProduct.productName,callback:function(t){e.$set(e.dialog.editProduct,"productName",t)},expression:"dialog.editProduct.productName"}})],1),a("el-form-item",{attrs:{label:"描述","label-width":"120px"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入描述",autocomplete:"off"},model:{value:e.dialog.editProduct.productDescription,callback:function(t){e.$set(e.dialog.editProduct,"productDescription",t)},expression:"dialog.editProduct.productDescription"}})],1),a("el-form-item",{attrs:{label:"分类","label-width":"120px"}},[a("el-select",{attrs:{size:"small",placeholder:"请选择"},model:{value:e.dialog.editProduct.categoryType,callback:function(t){e.$set(e.dialog.editProduct,"categoryType",t)},expression:"dialog.editProduct.categoryType"}},e._l(e.tableInfo.categories,(function(e){return a("el-option",{key:e.id,attrs:{label:e.categoryName,value:e.categoryType}})})),1)],1),a("el-form-item",{attrs:{label:"价格","label-width":"120px"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入价格",autocomplete:"off"},model:{value:e.dialog.editProduct.productPrice,callback:function(t){e.$set(e.dialog.editProduct,"productPrice",t)},expression:"dialog.editProduct.productPrice"}})],1),a("el-form-item",{attrs:{label:"库存","label-width":"120px"}},[a("el-input",{attrs:{size:"small",placeholder:"请输入库存",autocomplete:"off"},model:{value:e.dialog.editProduct.productStock,callback:function(t){e.$set(e.dialog.editProduct,"productStock",t)},expression:"dialog.editProduct.productStock"}})],1),a("el-form-item",{attrs:{label:"图片","label-width":"120px",prop:"productIcon"}},[a("el-upload",{staticClass:"upload-image",attrs:{"on-success":e.editIconSuccess,action:e.uploadUrl,limit:1,name:"file","list-type":"picture-card","before-upload":e.beforeIconUpload,"on-exceed":e.uploadExcced,"file-list":[{name:e.dialog.editProduct.productIcon.split("/").pop(),url:e.dialog.editProduct.productIcon}]}},[a("i",{staticClass:"el-icon-plus"})])],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.editProductVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editProduct()}}},[e._v("确 定")])],1)],1)],1)])])},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-div"},[a("h2",{staticClass:"title-text"},[a("span",[e._v("菜单管理")])])])}],q=(a("d81d"),a("a434"),{data:function(){return{host:window.location.protocol+"//"+window.location.host,uploadUrl:"/seller/product/uploadIcon",dialog:{addCategoryVisible:!1,addProductVisible:!1,editCategoryVisible:!1,editProductVisible:!1,editProductIndex:-1,editCategoryIndex:-1,newCategory:{categoryName:""},editCategory:{categoryName:"",oldName:""},newProduct:{productId:"",productName:"",productPrice:"",productStock:"",productIcon:"",productStatus:0,productDescription:"",categoryName:"",categoryType:""},rules:{productName:[{validator:function(e,t,a){t?a():a(new Error("请输入商品名称"))},trigger:"blur"}],productPrice:[{validator:function(e,t,a){""===t?a(new Error("请输入价格")):isNaN(parseFloat(t))?a(new Error("价格输入有误，非法字符")):a()},trigger:"blur"}],productStock:[{validator:function(e,t,a){""===t?a(new Error("请输入库存")):isNaN(parseInt(t))?a(new Error("价格输入有误，非法字符")):a()},trigger:"blur"}],productIcon:[{validator:function(e,t,a){t?a():a(new Error("请选择商品图片"))},trigger:"blur"}],productDescription:[{validator:function(e,t,a){""===t?a(new Error("请输入商品描述")):a()},trigger:"blur"}]},editProduct:{productId:"",productName:"",productPrice:"",productStock:"",productIcon:"",productStatus:0,productDescription:"",categoryName:"",categoryType:""}},activeTab:"menuList",statusOptions:[{label:"正常",value:0},{label:"已下架",value:1}],statusList:[{label:"全部",value:-1},{label:"正常",value:0},{label:"已下架",value:1}],categoryTypeMap:{},searchInfo:{keyword:"",productStatus:-1,page_num:1,page_size:8,total_num:1,tableData:[]},productStatus:-1,keyword:"",tableInfo:{page_num:1,page_size:8,total_num:1,categories:[],stringMap:{productId:"商品ID",productName:"商品名称",categoryName:"分类",productDescription:"描述",productPrice:"价格",productStock:"库存",updateTime:"更新时间",createTime:"创建时间"},tableData:[]}}},mounted:function(){this.$(".jquery-scrollbar-element").scrollbar(),this.getTableInfo()},methods:{updateScrollbar:function(e,t){var a=this;this.$nextTick((function(){0!=t.length&&!0!==e||a.$(".table-div").updateScrollbars(!0)}))},uploadExcced:function(){this.$message({message:"仅支持单个图片上传，点击删除原图片后重新选择",type:"warning"})},beforeIconUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t},changeSearchPage:function(e){this.searchInfo.page_num=e,this.getSearchInfo(!0)},changeSearchPageSize:function(e){this.searchInfo.page_size=e,this.getSearchInfo(!0)},changePage:function(e){this.tableInfo.page_num=e,this.getTableInfo()},changePageSize:function(e){this.tableInfo.page_size=e,this.getTableInfo()},updateInfo:function(){"menuList"==this.activeTab?this.getTableInfo():this.getSearchInfo(!0)},getTableInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t?this.searchInfo:this.tableInfo,l={};t&&(l={keyword:this.searchInfo.keyword,status:this.searchInfo.productStatus}),x.get("/seller/product/list",Object(b["a"])({page_num:a.page_num,page_size:a.page_size},l)).then((function(a){if(a&&1==a.code&&a.data){var l={};a.data.categories.map((function(e){l[e.categoryType]=e.categoryName})),e.categoryTypeMap=l,a.data.tableData.forEach((function(e){e.categoryName=l[e.categoryType]})),t?e.searchInfo=Object.assign(e.searchInfo,a.data):e.tableInfo=Object.assign(e.tableInfo,a.data)}}))},getSearchInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.searchInfo.keyword=this.keyword,this.searchInfo.productStatus=this.productStatus),this.activeTab="searchResult",this.getTableInfo(!0)},showAddProduct:function(){this.dialog.addProductVisible=!0,this.dialog.newProduct.productStatus=0;try{this.dialog.newProduct.categoryType=this.tableInfo.categories[0].categoryId}catch(e){}},showEditProduct:function(e){var t="menuList"==this.activeTab?this.tableInfo:this.searchInfo;this.dialog.editProductIndex=e,this.dialog.editProductVisible=!0,this.dialog.editProduct=JSON.parse(JSON.stringify(t.tableData[e]))},addProduct:function(){this.editProduct(!0)},editProduct:function(){var e,t=this,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0],l="menuList"==this.activeTab?this.tableInfo:this.searchInfo,o=this.dialog.editProductIndex,i=a?"添加":"编辑";a?(e=this.dialog.newProduct,this.dialog.addProductVisible=!1):(e=this.dialog.editProduct,this.dialog.editProductVisible=!1),x.post("/seller/product/save",e).then((function(e){if(e&&1==e.code)if(t.$message({message:i+"商品成功",type:"success"}),a)for(var r in t.updateInfo(),t.dialog.newProduct)t.dialog.newProduct[r]="";else l.tableData[o]=e.data;else t.$alert(e.tips,i+"商品失败",{confirmButtonText:"确定"})}))},deleteProduct:function(e){var t=this;this.$confirm("此操作将永久删除该商品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a="menuList"==t.activeTab?t.tableInfo:t.searchInfo,l=a.tableData[e].productId;x.post("/seller/product/delete",{productId:l}).then((function(e){e&&1==e.code?(t.$message({message:"删除商品成功",type:"success"}),t.updateInfo(),t.updateScrollbar(!0,[])):t.$alert(e.tips,"删除商品失败",{confirmButtonText:"确定"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},showEditCategory:function(e,t){e.target.classList.contains("edit-category")&&(this.dialog.editCategoryIndex=t,this.dialog.editCategoryVisible=!0,this.dialog.editCategory.categoryName=this.dialog.editCategory.oldName=this.tableInfo.categories[t].categoryName)},changeStatus:function(e,t){var a=this,l=t?"/seller/product/on_sale":"/seller/product/off_sale",o=t?"上架":"下架",i="menuList"==this.activeTab?this.tableInfo:this.searchInfo,r=i.tableData[e].productId;x.get(l,{productId:r}).then((function(e){if(e&&1==e.code){a.$message({message:o+"商品成功",type:"success"});var l=-1;i.tableData.some((function(e,t){if(e.productId==r)return l=t,!0}));var n=t?0:1;l>=0&&(i.tableData[l].productStatus=n)}else a.$alert(e.tips,o+"商品失败",{confirmButtonText:"确定"})}))},addCategory:function(){this.editCategory(!0),this.dialog.newCategory.categoryName=""},editCategory:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.dialog.editCategoryVisible=!1,this.dialog.addCategoryVisible=!1;var a=this.dialog.editCategoryIndex,l="",o=this.dialog.editCategory.categoryName,i=t?"添加":"编辑";t?o=this.dialog.newCategory.categoryName:l=this.tableInfo.categories[a].categoryId,x.post("/seller/category/save",{categoryId:l,categoryName:o}).then((function(l){l&&1==l.code?(e.$message({message:i+"分类成功",type:"success"}),t?e.tableInfo.categories.push(l.data):e.tableInfo.categories[a].categoryName=o):e.$alert(l.tips,i+"分类失败",{confirmButtonText:"确定"})}))},selectCategory:function(){},deleteCategory:function(e){var t=this;this.$confirm("此操作将永久删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=t.tableInfo.categories[e].categoryId;x.post("/seller/category/delete",{categoryId:a}).then((function(e){if(e&&1==e.code){t.$message({message:"删除分类成功",type:"success"});var l=-1;t.tableInfo.categories.some((function(e,t){if(e.categoryId==a)return l=t,!0})),l>=0&&t.tableInfo.categories.splice(l,1)}else t.$alert(e.tips,"删除分类失败",{confirmButtonText:"确定"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},uploadIconSuccess:function(e){e&&1==e.code&&(this.dialog.newProduct.productIcon=e.data)},editIconSuccess:function(e){e&&1==e.code&&(this.dialog.editProduct.productIcon=e.data)}}}),R=q,Q=(a("6ba0"),Object(n["a"])(R,L,B,!1,null,"db46c226",null)),J=Q.exports,W=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit-parent"},[a("div",{staticClass:"store-profile-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"padding24"},[e._m(0),a("div",{staticClass:"tab-div"},[a("el-tabs",{attrs:{type:"card"}},[a("el-tab-pane",{attrs:{label:"店铺信息"}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px",model:e.storeInfo}},[a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"店铺 ID:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.storeInfo.storeId))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"店名:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.storeInfo.storeName))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"联系方式:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.storeInfo.phone))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"地址:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.storeInfo.address))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"创建时间:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.storeInfo.createTime))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"更新时间:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.storeInfo.updateTime))])])],1)],1),a("el-tab-pane",{attrs:{label:"修改资料"}},[a("el-form",{ref:"storeForm",attrs:{"label-position":"right","label-width":"80px",model:e.store,rules:e.rules}},[a("el-form-item",{staticClass:"first-line",attrs:{label:"店名",prop:"storeName"}},[a("el-input",{attrs:{placeholder:"请输入店铺名称"},model:{value:e.store.storeName,callback:function(t){e.$set(e.store,"storeName",t)},expression:"store.storeName"}})],1),a("el-form-item",{attrs:{label:"联系方式",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入联系方式"},model:{value:e.store.phone,callback:function(t){e.$set(e.store,"phone",t)},expression:"store.phone"}})],1),a("el-form-item",{attrs:{label:"地址",prop:"address"}},[a("el-input",{attrs:{placeholder:"请输入店铺地址"},model:{value:e.store.address,callback:function(t){e.$set(e.store,"address",t)},expression:"store.address"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.editProfile}},[e._v("提交")]),a("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)])])])},H=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-div"},[a("h2",{staticClass:"title-text"},[a("span",[e._v("店铺资料")])])])}],K={data:function(){return{storeInfo:{storeId:"",storeName:"",phone:"",address:"",updateTime:"",username:""},store:{storeName:"",phone:"",address:""},rules:{storeName:[{validator:function(e,t,a){t?a():a(new Error("请输入店铺名称"))},trigger:"blur"}],address:[{validator:function(e,t,a){t?a():a(new Error("请输入店铺地址"))},trigger:"blur"}],phone:[{validator:function(e,t,a){/\d{11}/.test(t)?a():a(new Error("请输入11位手机号码"))},trigger:"blur"}]}}},mounted:function(){this.$(".jquery-scrollbar-element").scrollbar(),this.getStoreInfo()},methods:{getStoreInfo:function(){var e=this;x.get("/store/info").then((function(t){t&&1==t.code&&(e.storeInfo=t.data,e.store=Object(b["a"])({},t.data))}))},resetForm:function(){this.$refs["storeForm"].resetFields()},editProfile:function(){var e=this,t=Object(b["a"])({},this.store);this.$refs["storeForm"].validate((function(a){if(!a)return e.$alert("信息填写有误","未提交",{confirmButtonText:"确定"}),!1;x.post("/store/save",t).then((function(t){t&&1==t.code?(e.$message({message:"修改资料成功",type:"success"}),e.resetForm(),e.getStoreInfo()):e.$alert(t.tips,"修改资料失败",{confirmButtonText:"确定"})}))}))}}},Z=K,G=(a("58ac"),Object(n["a"])(Z,W,H,!1,null,"9f6f1c66",null)),X=G.exports,Y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit-parent"},[a("div",{staticClass:"account-manage-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"padding24"},[e._m(0),a("div",{staticClass:"accounts-div"},[a("div",{staticClass:"tools-div"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchInfo}},[a("el-form-item",{attrs:{label:"查找账号:"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入昵称/手机号码/用户ID","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchInfo()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getSearchInfo()}}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-plus"},on:{click:function(t){e.dialog.addAccountVisible=!0}}},[e._v("添加账号")])],1)],1)],1),a("div",{staticClass:"account-table"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.updateInfo},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"账号列表",name:"menuList"}},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getTableInfo()}}}),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInfo.tableData,border:""}},[a("el-table-column",{attrs:{label:"账号 ID",prop:"sellerId"}}),a("el-table-column",{attrs:{label:"昵称",prop:"username"}}),a("el-table-column",{attrs:{label:"手机号码",prop:"phone"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),a("el-table-column",{attrs:{label:"更新时间",prop:"updateTime"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",title:"编辑",size:"small"},on:{click:function(a){return e.showEditAccount(t.$index)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",title:"删除账号",size:"small"},on:{click:function(a){return e.deleteAccount(t.$index)}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.tableInfo.page_num,"page-sizes":[6,8,10,15,20,30],"page-size":e.tableInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.tableInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changePageSize,"current-change":e.changePage}})],1)]),a("el-tab-pane",{attrs:{label:"搜索结果",name:"searchResult"}},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getSearchInfo(!0)}}}),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchInfo.tableData,border:""}},[a("el-table-column",{attrs:{label:"账号 ID",prop:"sellerId"}}),a("el-table-column",{attrs:{label:"昵称",prop:"username"}}),a("el-table-column",{attrs:{label:"手机号码",prop:"phone"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),a("el-table-column",{attrs:{label:"更新时间",prop:"updateTime"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",title:"编辑",size:"small"},on:{click:function(a){return e.showEditAccount(t.$index)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",title:"删除账号",size:"small"},on:{click:function(a){return e.deleteAccount(t.$index)}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.searchInfo.page_num,"page-sizes":[6,8,10,15,20,30],"page-size":e.searchInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.searchInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changeSearchPageSize,"current-change":e.changeSearchPage}})],1)])],1)],1)]),a("el-dialog",{attrs:{title:"添加账号",visible:e.dialog.addAccountVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"addAccountVisible",t)}}},[a("el-form",{ref:"addAccountForm",attrs:{model:e.dialog.newAccount,rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"昵称","label-width":"120px",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入昵称",autocomplete:"off"},model:{value:e.dialog.newAccount.username,callback:function(t){e.$set(e.dialog.newAccount,"username",t)},expression:"dialog.newAccount.username"}})],1),a("el-form-item",{attrs:{label:"手机号码","label-width":"120px",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号码",autocomplete:"off"},model:{value:e.dialog.newAccount.phone,callback:function(t){e.$set(e.dialog.newAccount,"phone",t)},expression:"dialog.newAccount.phone"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":"120px",prop:"password"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入密码",autocomplete:"off"},model:{value:e.dialog.newAccount.password,callback:function(t){e.$set(e.dialog.newAccount,"password",t)},expression:"dialog.newAccount.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.addAccountVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addAccount()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑账号",visible:e.dialog.editAccountVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"editAccountVisible",t)}}},[a("el-form",{ref:"editAccountForm",attrs:{model:e.dialog.account,rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"昵称","label-width":"120px",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入昵称",autocomplete:"off"},model:{value:e.dialog.account.username,callback:function(t){e.$set(e.dialog.account,"username",t)},expression:"dialog.account.username"}})],1),a("el-form-item",{attrs:{label:"手机号码","label-width":"120px",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号码",autocomplete:"off"},model:{value:e.dialog.account.phone,callback:function(t){e.$set(e.dialog.account,"phone",t)},expression:"dialog.account.phone"}})],1),a("el-form-item",{attrs:{label:"密码","label-width":"120px"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入密码，为空则不更改",autocomplete:"off"},model:{value:e.dialog.account.password,callback:function(t){e.$set(e.dialog.account,"password",t)},expression:"dialog.account.password"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.editAccountVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editAccount()}}},[e._v("确 定")])],1)],1)],1)])])},ee=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-div"},[a("h2",{staticClass:"title-text"},[a("span",[e._v("账号管理")])])])}],te={data:function(){var e={dialog:{addAccountVisible:!1,editAccountVisible:!1,newAccount:{username:"",phone:"",password:""},account:{sellerId:"",username:"",phone:"",password:""},rules:{username:[{validator:function(e,t,a){t?a():a(new Error("请输入昵称"))},trigger:"blur"}],password:[{validator:function(e,t,a){t?a():a(new Error("请输入密码"))},trigger:"blur"}],phone:[{validator:function(e,t,a){/\d{11}/.test(t)?a():a(new Error("请输入11位手机号码"))},trigger:"blur"}]}},activeTab:"menuList",searchInfo:{keyword:"",page_num:1,page_size:8,total_num:1,tableData:[]},keyword:"",tableInfo:{page_num:1,page_size:8,total_num:1,tableData:[]}};return e},mounted:function(){this.$(".jquery-scrollbar-element").scrollbar(),this.getTableInfo()},methods:{changeSearchPage:function(e){this.searchInfo.page_num=e,this.getSearchInfo(!0)},changeSearchPageSize:function(e){this.searchInfo.page_size=e,this.getSearchInfo(!0)},changePage:function(e){this.tableInfo.page_num=e,this.getTableInfo()},changePageSize:function(e){this.tableInfo.page_size=e,this.getTableInfo()},updateInfo:function(){"menuList"==this.activeTab?this.getTableInfo():this.getSearchInfo(!0)},getTableInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t?this.searchInfo:this.tableInfo,l={};t&&(l={keyword:this.searchInfo.keyword}),x.get("/admin/list",Object(b["a"])({page_num:a.page_num,page_size:a.page_size},l)).then((function(a){a&&1==a.code&&a.data&&(t?e.searchInfo=Object.assign(e.searchInfo,a.data):e.tableInfo=Object.assign(e.tableInfo,a.data))}))},getSearchInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.searchInfo.keyword=this.keyword),this.activeTab="searchResult",this.getTableInfo(!0)},showAddAccount:function(){this.dialog.addAccountVisible=!0},showEditAccount:function(e){var t="menuList"==this.activeTab?this.tableInfo:this.searchInfo;this.dialog.account=Object(b["a"])({},t.tableData[e]),this.dialog.editAccountVisible=!0},addAccount:function(){this.dialog.addAccountVisible=!1,this.editAccount(!0)},editAccount:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.dialog.editAccountVisible=!1);var a=t?this.dialog.newAccount:this.dialog.account,l=t?"添加":"编辑",o=t?this.$refs["addAccountForm"]:this.$refs["editAccountForm"],i=Object(b["a"])({},a);delete i.updateTime,delete i.createTime,i.password||delete i.password,o.validate((function(a){if(!a)return e.$alert("信息填写有误","未提交",{confirmButtonText:"确定"}),!1;x.post("/admin/save",i).then((function(a){a&&1==a.code?(e.$message({message:l+"账号成功",type:"success"}),t?o.resetFields():e.$emit("update-user",i.sellerId),e.updateInfo()):e.$alert(a.tips,l+"账号失败",{confirmButtonText:"确定"})}))}))},deleteAccount:function(e){var t=this,a="menuList"==this.activeTab?this.tableInfo:this.searchInfo,l=a.tableData[e].sellerId;this.$confirm("此操作将永久删除该账号, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){x.post("/admin/delete",{sellerId:l}).then((function(e){e&&1==e.code?(t.$message({message:"删除账号成功",type:"success"}),t.updateInfo()):t.$alert(e.tips,"删除账号失败",{confirmButtonText:"确定"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},ae=te,le=(a("1eb3"),Object(n["a"])(ae,Y,ee,!1,null,"400bdac8",null)),oe=le.exports,ie=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit-parent"},[a("div",{staticClass:"person-profile-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"padding24"},[e._m(0),a("div",{staticClass:"tab-div"},[a("el-tabs",{staticStyle:{height:"350px"},attrs:{"tab-position":"left"}},[a("el-tab-pane",{attrs:{label:"用户信息"}},[a("el-form",{attrs:{"label-position":"right","label-width":"80px",model:e.userInfo}},[a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"账号 ID:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.userInfo.sellerId))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"昵称:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.userInfo.username))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"手机号码:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.userInfo.phone))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"创建时间:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.userInfo.createTime))])]),a("el-form-item",{staticClass:"closer-form-item",attrs:{label:"更新时间:"}},[a("span",{staticClass:"field-span"},[e._v(e._s(e.userInfo.updateTime))])])],1)],1),a("el-tab-pane",{attrs:{label:"修改资料"}},[a("el-form",{ref:"userForm",attrs:{"label-position":"right","label-width":"80px",model:e.user,rules:e.rules}},[a("el-form-item",{staticClass:"first-line",attrs:{label:"昵称",prop:"username"}},[a("el-input",{attrs:{placeholder:"请输入用户昵称"},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),a("el-form-item",{attrs:{label:"密码",prop:"password"}},[a("el-input",{attrs:{"show-password":"",placeholder:"请输入密码，为空则不更改"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("el-form-item",{attrs:{label:"手机号码"}},[a("el-input",{attrs:{placeholder:"请输入11位手机号码"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.editProfile}},[e._v("提交")]),a("el-button",{on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1)],1)])])])},re=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-div"},[a("h2",{staticClass:"title-text"},[a("span",[e._v("个人资料")])])])}],ne={data:function(){return{userInfo:{createTime:"",phone:"",sellerId:"",updateTime:"",username:""},user:{username:"",password:"",phone:""},rules:{username:[{validator:function(e,t,a){t?a():a(new Error("请输入昵称"))},trigger:"blur"}],phone:[{validator:function(e,t,a){/\d{11}/.test(t)?a():a(new Error("请输入11位手机号码"))},trigger:"blur"}]}}},mounted:function(){this.$(".jquery-scrollbar-element").scrollbar(),this.getUserInfo()},methods:{getUserInfo:function(){var e=this;x.get("/admin/loginStatus").then((function(t){t&&1==t.code&&(e.userInfo=t.data,e.user.username=t.data.username,e.user.phone=t.data.phone)}))},resetForm:function(){this.$refs["userForm"].resetFields()},editProfile:function(){var e=this,t=JSON.parse(JSON.stringify(this.user));null==t.password&&delete t.password,this.$refs["userForm"].validate((function(a){if(!a)return e.$alert("信息填写有误","未提交",{confirmButtonText:"确定"}),!1;x.post("/admin/save",Object(b["a"])({sellerId:e.userInfo.sellerId},t)).then((function(t){t&&1==t.code?(e.$message({message:"修改资料成功",type:"success"}),e.resetForm(),e.getUserInfo(),e.$emit("update-user")):e.$alert(t.tips,"修改资料失败",{confirmButtonText:"确定"})}))}))}}},se=ne,ce=(a("91d3"),Object(n["a"])(se,ie,re,!1,null,"2a8fbfc9",null)),ue=ce.exports,de=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit-parent"},[a("div",{staticClass:"table-manage-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"padding24"},[e._m(0),a("div",{staticClass:"accounts-div"},[a("div",{staticClass:"tools-div"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchInfo}},[a("el-form-item",{attrs:{label:"搜索记录:"}},[a("el-input",{staticClass:"search-input",attrs:{size:"small",placeholder:"请输入ID/别名/桌号","prefix-icon":"el-icon-search"},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getSearchInfo()}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",type:"primary",icon:"el-icon-search"},on:{click:function(t){return e.getSearchInfo()}}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-plus"},on:{click:function(t){e.dialog.addTableVisble=!0}}},[e._v("添加桌台")])],1)],1)],1),a("div",{staticClass:"table-info-list"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.updateInfo},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"桌台列表",name:"menuList"}},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getTableInfo()}}}),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInfo.tableData,border:""}},[a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{label:"别名",prop:"tableName"}}),a("el-table-column",{attrs:{label:"桌号",prop:"tableNum"}}),a("el-table-column",{attrs:{label:"二维码"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row["qrcodeUrl"]?a("el-image",{staticClass:"pointer-cursor",staticStyle:{width:"50px",height:"50px"},attrs:{fit:"cover",src:t.row["qrcodeUrl"]},nativeOn:{click:function(a){return e.previewQrcode(t.$index)}}}):a("span",[e._v("暂无，点击右边生成")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),a("el-table-column",{attrs:{label:"更新时间",prop:"updateTime"}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-thumb",circle:"",title:"生成二维码",size:"small"},on:{click:function(a){return e.generateQrcode(t.$index)}}}),a("el-button",{attrs:{type:"success",icon:"el-icon-download",circle:"",title:"下载",size:"small"},on:{click:function(a){return e.downloaQrcode(t.$index)}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",title:"编辑",size:"small"},on:{click:function(a){return e.showEditTable(t.$index)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",title:"删除账号",size:"small"},on:{click:function(a){return e.deleteTable(t.$index)}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.tableInfo.page_num,"page-sizes":[6,8,10,15,20,30],"page-size":e.tableInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.tableInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changePageSize,"current-change":e.changePage}})],1)]),a("el-tab-pane",{attrs:{label:"搜索结果",name:"searchResult"}},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getSearchInfo(!0)}}}),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.searchInfo.tableData,border:""}},[a("el-table-column",{attrs:{label:"ID",prop:"id"}}),a("el-table-column",{attrs:{label:"别名",prop:"tableName"}}),a("el-table-column",{attrs:{label:"桌号",prop:"tableNum"}}),a("el-table-column",{attrs:{label:"二维码"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row["qrcodeUrl"]?a("el-image",{staticClass:"pointer-cursor",staticStyle:{width:"50px",height:"50px"},attrs:{fit:"cover",src:t.row["qrcodeUrl"]},nativeOn:{click:function(a){return e.previewQrcode(t.$index)}}}):a("span",[e._v("暂无，点击右边生成")])]}}])}),a("el-table-column",{attrs:{label:"创建时间",prop:"createTime"}}),a("el-table-column",{attrs:{label:"更新时间",prop:"updateTime"}}),a("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-thumb",circle:"",title:"生成二维码",size:"small"},on:{click:function(a){return e.generateQrcode(t.$index)}}}),a("el-button",{attrs:{type:"success",icon:"el-icon-download",circle:"",title:"下载",size:"small"},on:{click:function(a){return e.downloaQrcode(t.$index)}}}),a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",title:"编辑",size:"small"},on:{click:function(a){return e.showEditTable(t.$index)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",title:"删除账号",size:"small"},on:{click:function(a){return e.deleteTable(t.$index)}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.searchInfo.page_num,"page-sizes":[6,8,10,15,20,30],"page-size":e.searchInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.searchInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changeSearchPageSize,"current-change":e.changeSearchPage}})],1)])],1)],1)]),a("el-dialog",{attrs:{title:"添加桌台",visible:e.dialog.addTableVisble,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"addTableVisble",t)}}},[a("el-form",{ref:"addTableForm",attrs:{model:e.dialog.newTable,rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"桌号","label-width":"120px",prop:"tableNum"}},[a("el-input",{attrs:{placeholder:"请输入唯一桌号",autocomplete:"off"},model:{value:e.dialog.newTable.tableNum,callback:function(t){e.$set(e.dialog.newTable,"tableNum",t)},expression:"dialog.newTable.tableNum"}})],1),a("el-form-item",{attrs:{label:"别名","label-width":"120px",prop:"tableName"}},[a("el-input",{attrs:{placeholder:"请输入别名",autocomplete:"off"},model:{value:e.dialog.newTable.tableName,callback:function(t){e.$set(e.dialog.newTable,"tableName",t)},expression:"dialog.newTable.tableName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.addTableVisble=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addTable()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑桌台",visible:e.dialog.editTableVisble,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"editTableVisble",t)}}},[a("el-form",{ref:"editTableForm",attrs:{model:e.dialog.table,rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"桌号","label-width":"120px",prop:"tableNum"}},[a("el-input",{attrs:{placeholder:"请输入唯一桌号",autocomplete:"off"},model:{value:e.dialog.table.tableNum,callback:function(t){e.$set(e.dialog.table,"tableNum",t)},expression:"dialog.table.tableNum"}})],1),a("el-form-item",{attrs:{label:"别名","label-width":"120px",prop:"tableName"}},[a("el-input",{attrs:{placeholder:"请输入别名",autocomplete:"off"},model:{value:e.dialog.table.tableName,callback:function(t){e.$set(e.dialog.table,"tableName",t)},expression:"dialog.table.tableName"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.editTableVisble=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editTable()}}},[e._v("确 定")])],1)],1)],1)]),a("el-dialog",{attrs:{visible:e.dialog.previewImageVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"previewImageVisible",t)}}},[a("el-image",{staticStyle:{width:"400px",height:"400px"},attrs:{fit:"cover",src:e.dialog.dialogImageUrl}})],1),a("a",{staticClass:"unvisible",attrs:{href:"javascript:;",download:"",id:"downloadAction"}})],1)},pe=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-div"},[a("h2",{staticClass:"title-text"},[a("span",[e._v("桌台管理")])])])}],fe={data:function(){var e={dialog:{dialogImageUrl:"",previewImageVisible:!1,addTableVisble:!1,editTableVisble:!1,newTable:{tableNum:"",tableName:""},table:{tableNum:"",tableName:""},rules:{tableNum:[{validator:function(e,t,a){t?a():a(new Error("请输入唯一桌号"))},trigger:"blur"}],tableName:[{validator:function(e,t,a){t?a():a(new Error("请输入别名"))},trigger:"blur"}]}},activeTab:"menuList",searchInfo:{keyword:"",page_num:1,page_size:6,total_num:1,tableData:[]},keyword:"",tableInfo:{page_num:1,page_size:6,total_num:1,tableData:[]}};return e},mounted:function(){this.$(".jquery-scrollbar-element").scrollbar(),this.getTableInfo()},methods:{generateQrcode:function(e){var t=this,a="menuList"==this.activeTab?this.tableInfo:this.searchInfo,l=a.tableData[e].tableNum;x.get("/storeTable/createQrcode",{tableNum:l}).then((function(e){e&&1==e.code?(t.$message({message:"生成二维码成功",type:"success"}),t.updateInfo()):t.$alert(e.tips,"生成二维码失败",{confirmButtonText:"确定"})}))},downloaQrcode:function(e){var t="menuList"==this.activeTab?this.tableInfo:this.searchInfo,a=t.tableData[e].qrcodeUrl;this.$("#downloadAction").attr("download",a).attr("target","_blank").attr("href",a).get(0).click()},previewQrcode:function(e){var t="menuList"==this.activeTab?this.tableInfo:this.searchInfo,a=t.tableData[e].qrcodeUrl;this.dialog.dialogImageUrl=a,this.dialog.previewImageVisible=!0},changeSearchPage:function(e){this.searchInfo.page_num=e,this.getSearchInfo(!0)},changeSearchPageSize:function(e){this.searchInfo.page_size=e,this.getSearchInfo(!0)},changePage:function(e){this.tableInfo.page_num=e,this.getTableInfo()},changePageSize:function(e){this.tableInfo.page_size=e,this.getTableInfo()},updateInfo:function(){"menuList"==this.activeTab?this.getTableInfo():this.getSearchInfo(!0)},getTableInfo:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=t?this.searchInfo:this.tableInfo,l={};t&&(l={keyword:this.searchInfo.keyword}),x.get("/storeTable/list",Object(b["a"])({page_num:a.page_num,page_size:a.page_size},l)).then((function(a){a&&1==a.code&&a.data&&(t?e.searchInfo=Object.assign(e.searchInfo,a.data):e.tableInfo=Object.assign(e.tableInfo,a.data))}))},getSearchInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.searchInfo.keyword=this.keyword),this.activeTab="searchResult",this.getTableInfo(!0)},showaddTable:function(){this.dialog.addTableVisble=!0},showEditTable:function(e){var t="menuList"==this.activeTab?this.tableInfo:this.searchInfo;this.dialog.table=Object(b["a"])({},t.tableData[e]),this.dialog.editTableVisble=!0},addTable:function(){this.dialog.addTableVisble=!1,this.editTable(!0)},editTable:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.dialog.editTableVisble=!1);var a=t?this.dialog.newTable:this.dialog.table,l=t?"添加":"编辑",o=t?this.$refs["addTableForm"]:this.$refs["editTableForm"],i=Object(b["a"])({},a);delete i.updateTime,delete i.createTime,o.validate((function(a){if(!a)return e.$alert("信息填写有误","未提交",{confirmButtonText:"确定"}),!1;x.post("/storeTable/save",i).then((function(a){a&&1==a.code?(e.$message({message:l+"桌台成功",type:"success"}),t&&o.resetFields(),e.updateInfo()):e.$alert(a.tips,l+"桌台失败",{confirmButtonText:"确定"})}))}))},deleteTable:function(e){var t=this,a="menuList"==this.activeTab?this.tableInfo:this.searchInfo,l=a.tableData[e].id;this.$confirm("此操作将永久删除该桌台, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){x.post("/storeTable/delete",{id:l}).then((function(e){e&&1==e.code?(t.$message({message:"删除桌台成功",type:"success"}),t.updateInfo()):t.$alert(e.tips,"删除桌台失败",{confirmButtonText:"确定"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))}}},be=fe,me=(a("16a6"),Object(n["a"])(be,de,pe,!1,null,"15bf948f",null)),ge=me.exports,he=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"fit-parent"},[a("div",{staticClass:"banner-picture-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"padding24"},[e._m(0),a("div",{staticClass:"accounts-div"},[a("div",{staticClass:"tools-div"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"工具栏："}},[a("el-button",{attrs:{size:"small",plain:"",icon:"el-icon-plus"},on:{click:function(t){e.dialog.addPictureVisible=!0}}},[e._v("添加图片")])],1)],1)],1),a("div",{staticClass:"account-table"},[a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.updateInfo},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"图片列表",name:"menuList"}},[a("i",{staticClass:"el-icon-refresh refresh-table",on:{click:function(t){return e.getTableInfo()}}}),a("div",{staticClass:"table-div jquery-scrollbar-element scrollbar-macosx"},[a("div",{staticClass:"inline-block"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableInfo.tableData,border:""}},[a("el-table-column",{attrs:{label:"图片 ID",prop:"picId"}}),a("el-table-column",{attrs:{label:"图片"},scopedSlots:e._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"160px",height:"75px"},attrs:{fit:"cover",src:e.row["picUrl"]}})]}}])}),a("el-table-column",{attrs:{label:"备注",prop:"picMessage"}}),a("el-table-column",{attrs:{label:"创建时间",prop:"picCreate"}}),a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",title:"编辑",size:"small"},on:{click:function(a){return e.showEditPicture(t.$index)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",title:"删除图片",size:"small"},on:{click:function(a){return e.deletePicture(t.$index)}}})]}}])})],1)],1)]),a("div",{staticClass:"pager-div"},[a("el-pagination",{attrs:{"current-page":e.tableInfo.page_num,"page-sizes":[3,4,6,8,10,15,20,30],"page-size":e.tableInfo.page_size,layout:"total, sizes, prev, pager, next, jumper",total:e.tableInfo.total_num,"pager-count":5,size:"small"},on:{"size-change":e.changePageSize,"current-change":e.changePage}})],1)]),a("el-tab-pane",{attrs:{label:"图片预览",name:"picturePreview"}},[a("div",{staticClass:"picture-preview-div"},[a("el-carousel",{attrs:{trigger:"click",height:"300px"}},e._l(e.tableInfo.tableData,(function(e){return a("el-carousel-item",{key:e.picId},[a("el-image",{staticStyle:{width:"640px",height:"300px"},attrs:{fit:"fill",src:e["picUrl"]}})],1)})),1)],1)])],1)],1)]),a("el-dialog",{attrs:{title:"添加图片",visible:e.dialog.addPictureVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"addPictureVisible",t)}}},[a("el-form",{ref:"addPictureForm",attrs:{model:e.dialog.newPicture,rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"图片","label-width":"120px",prop:"productIcon"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"on-success":e.uploadIconSuccess,action:e.uploadUrl,limit:1,name:"file","before-upload":e.beforeIconUpload,"on-exceed":e.uploadExcced}},[e.dialog.newPicture.picUrl?a("img",{staticClass:"avatar",attrs:{src:e.dialog.newPicture.picUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"备注","label-width":"120px",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入备注",autocomplete:"off"},model:{value:e.dialog.newPicture.picMessage,callback:function(t){e.$set(e.dialog.newPicture,"picMessage",t)},expression:"dialog.newPicture.picMessage"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.addPictureVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addPicture()}}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑图片",visible:e.dialog.editPcitureVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){return e.$set(e.dialog,"editPcitureVisible",t)}}},[a("el-form",{ref:"editPictureForm",attrs:{model:e.dialog.picture,rules:e.dialog.rules}},[a("el-form-item",{attrs:{label:"图片","label-width":"120px",prop:"productIcon"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{"on-success":e.editIconSuccess,action:e.uploadUrl,limit:1,name:"file","before-upload":e.beforeIconUpload,"on-exceed":e.uploadExcced,"file-list":[{name:e.dialog.picture.picUrl.split("/").pop(),url:e.dialog.picture.picUrl}]}},[e.dialog.picture.picUrl?a("img",{staticClass:"avatar",attrs:{src:e.dialog.picture.picUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"备注","label-width":"120px",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入备注",autocomplete:"off"},model:{value:e.dialog.picture.picMessage,callback:function(t){e.$set(e.dialog.picture,"picMessage",t)},expression:"dialog.picture.picMessage"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.editPcitureVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editPicture()}}},[e._v("确 定")])],1)],1)],1)])])},ve=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"title-div"},[a("h2",{staticClass:"title-text"},[a("span",[e._v("轮播图管理")])])])}],ye={data:function(){var e={uploadUrl:"/seller/product/uploadIcon",dialog:{addPictureVisible:!1,editPcitureVisible:!1,newPicture:{picUrl:"",picMessage:""},picture:{picUrl:"",picMessage:""},rules:{picUrl:[{validator:function(e,t,a){t?a():a(new Error("请上传图片"))},trigger:"change"}]}},activeTab:"menuList",tableInfo:{page_num:1,page_size:4,total_num:1,tableData:[]}};return e},mounted:function(){this.$(".jquery-scrollbar-element").scrollbar(),this.getTableInfo()},methods:{changePage:function(e){this.tableInfo.page_num=e,this.getTableInfo()},changePageSize:function(e){this.tableInfo.page_size=e,this.getTableInfo()},updateInfo:function(){"menuList"==this.activeTab&&this.getTableInfo()},getTableInfo:function(){var e=this,t=this.tableInfo;x.get("/picture/list",{page_num:t.page_num,page_size:t.page_size}).then((function(t){t&&1==t.code&&t.data&&(e.tableInfo=Object.assign(e.tableInfo,t.data))}))},showaddPicture:function(){this.dialog.addPictureVisible=!0},showEditPicture:function(e){var t=this.tableInfo;this.dialog.picture=Object(b["a"])({},t.tableData[e]),this.dialog.editPcitureVisible=!0},addPicture:function(){this.dialog.addPictureVisible=!1,this.editPicture(!0)},editPicture:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.dialog.editPcitureVisible=!1);var a=t?this.dialog.newPicture:this.dialog.picture,l=t?"添加":"编辑",o=t?this.$refs["addPictureForm"]:this.$refs["editPictureForm"],i=Object(b["a"])({},a);delete i.updateTime,delete i.picCreate,o.validate((function(a){if(!a)return e.$alert("信息填写有误","未提交",{confirmButtonText:"确定"}),!1;x.post("/picture/save",i).then((function(a){a&&1==a.code?(e.$message({message:l+"图片成功",type:"success"}),t&&o.resetFields(),e.updateInfo()):e.$alert(a.tips,l+"图片失败",{confirmButtonText:"确定"})}))}))},deletePicture:function(e){var t=this,a=this.tableInfo,l=a.tableData[e].picId;this.$confirm("此操作将永久删除该图片, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){x.post("/picture/delete",{picId:l}).then((function(e){e&&1==e.code?(t.$message({message:"删除图片成功",type:"success"}),t.updateInfo()):t.$alert(e.tips,"删除图片失败",{confirmButtonText:"确定"})}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},uploadExcced:function(){this.$message({message:"仅支持单个图片上传，点击删除原图片后重新选择",type:"warning"})},beforeIconUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t},uploadIconSuccess:function(e){e&&1==e.code&&(this.dialog.newPicture.picUrl=e.data)},editIconSuccess:function(e){e&&1==e.code&&(this.dialog.picture.picUrl=e.data)}}},Ie=ye,we=(a("f142"),Object(n["a"])(Ie,he,ve,!1,null,"19869204",null)),_e=we.exports;o["default"].use(d["a"]);var ke=[{path:"/",component:P,children:[{path:"OrderManage",component:F},{path:"ProductManage",component:J},{path:"StoreProfile",component:X},{path:"AccountManage",component:oe},{path:"PersonProfile",component:ue},{path:"TableManage",component:ge},{path:"BannerPicture",component:_e},{path:"",redirect:"OrderManage"}]},{path:"/login",name:"Login",component:E},{path:"*",redirect:"/"}],xe=new d["a"]({routes:ke}),Ce=xe,Te=(a("0fae"),a("fe64"),a("554d"),a("1157")),Se=a.n(Te),Pe=(a("be4a"),Se.a.prototype.scrollbar);Se.a.prototype.scrollbar=function(){Pe.apply(this,arguments),this.each((function(e,t){var a=Se()(t),o=Object(l["a"])(t.attributes),i=!0,r=!1,n=void 0;try{for(var s,c=o[Symbol.iterator]();!(i=(s=c.next()).done);i=!0){var u=s.value;if(/^data-v-/.test(u.nodeName)){a.parent().attr(u.nodeName,"");break}}}catch(d){r=!0,n=d}finally{try{i||null==c.return||c.return()}finally{if(r)throw n}}}))},o["default"].use(I.a),o["default"].config.productionTip=!1,o["default"].prototype.$=o["default"].prototype.jQuery=Se.a,new o["default"]({router:Ce,render:function(e){return e(u)}}).$mount("#app")},"58ac":function(e,t,a){"use strict";var l=a("ec58"),o=a.n(l);o.a},"6ba0":function(e,t,a){"use strict";var l=a("d79d"),o=a.n(l);o.a},"6d88":function(e,t,a){},"7fb7":function(e,t,a){},"88af":function(e,t,a){"use strict";var l=a("93b6"),o=a.n(l);o.a},"91d3":function(e,t,a){"use strict";var l=a("6d88"),o=a.n(l);o.a},"93b6":function(e,t,a){},"93c0":function(e,t,a){},"9b5a":function(e,t,a){},a9d2:function(e,t,a){"use strict";var l=a("e5b0"),o=a.n(l);o.a},d1ee:function(e,t,a){"use strict";var l=a("f4d8"),o=a.n(l);o.a},d79d:function(e,t,a){},e5b0:function(e,t,a){},ec58:function(e,t,a){},f142:function(e,t,a){"use strict";var l=a("9b5a"),o=a.n(l);o.a},f4d8:function(e,t,a){}});
//# sourceMappingURL=app.6e3bc3f3.js.map